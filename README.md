# Техническое задание 1

## Описание

Скрипт `copy_files.sh` предназначен для копирования всех файлов из одной директории в другую с проверкой и обработкой возможных конфликтов имен файлов. Скрипт написан на Bash и предназначен для использования в Unix-подобных операционных системах.

## Структура репозитория

В репозитории присутствуют следующие компоненты:

- `copy_files.sh` - Основной скрипт для копирования файлов.
- `test` и `test2` - Папки для проверки работы скрипта.

## Работа скрипта

### Проверки перед выполнением

Скрипт проверяет наличие двух аргументов командной строки: входной и выходной директорий. Если аргументы не предоставлены, скрипт завершится с сообщением о примере использования скрипта.

```bash
if [ $# -ne 2 ]; then
    echo "Использование: $0 "входная_директория" "выходная_директория""
    exit 1
fi
```

Дополнительно скрипт проверяет существование указанных директорий. Если одна из директорий не существует, скрипт также завершится с соответствующим сообщением.

```bash
if [ ! -d "$input_dir" ]; then
    echo "Входная директория $input_dir не существует."
    exit 1
fi

if [ ! -d "$output_dir" ]; then
    echo "Выходная директория $output_dir не существует."
    exit 1
fi
```

### Копирование файлов

Для каждого файла во входной директории и её поддиректориях выполняется копирование в указанную выходную директорию.

```
find "$input_dir" -type f | while read -r file; do
    copy_file "$file" "$output_dir/$(basename "$file")"
done
```

Заа копирование отвечает функция copy_file()

```bash
copy_file() {
    local source_path="$1"
    local destination_path="$2"
    local filename=$(basename "$source_path")
    local extension="${filename##*.}"
    local name="${filename%.*}"

    local counter=0
    local new_filename="$filename"

    while [ -f "$output_dir/$new_filename" ]; do
        # Увеличиваем счетчик и формируем новое имя файла с индексом
        ((counter++))
        new_filename="${name} ($counter).${extension}"
    done

    cp "$source_path" "$output_dir/$new_filename"
}
```

Если в выходной директории уже существует файл с таким же именем, скрипт автоматически создает новое имя файла, добавляя к нему индекс в скобках, чтобы избежать перезаписи существующих файлов.

### Завершение работы

После копирования всех файлов скрипт выводит сообщение о успешном завершении операции.

```
echo "Все файлы были скопированы в $output_dir"
```

## Запуск скрипта

Для запуска скрипта рекомендуется открыть Git Bash в директории, где находится скрипт, и выполнить следующую команду:

```bash
./copy_files.sh путь_к_входной_директории путь_к_выходной_директории
```

Замените `путь_к_входной_директории` и `путь_к_выходной_директории` на соответствующие пути к вашим директориям в ковычках.

Для проверки работы вы можете установить папки `test` и `test2` для проверки работоспобности кода.

## Пример работы

Папки до копирования:

![image](https://github.com/RomaShinkarev/programming_technology/assets/85445712/4ba06b72-0bdd-4aa6-acfa-d7aaf4e1f438)

![image](https://github.com/RomaShinkarev/programming_technology/assets/85445712/488e5e57-aeeb-4e99-89b4-d7023d92d92c)

Запуск скрипта:

![image](https://github.com/RomaShinkarev/programming_technology/assets/85445712/47304799-1460-4023-9222-cf2a89e34137)

Папка test2 после запуска скрипта:

![image](https://github.com/RomaShinkarev/programming_technology/assets/85445712/0ecfece9-66ef-442b-9e48-d9fe5a1a87e4)

## Важно

Убедитесь, что у вас есть права на выполнение скрипта. Если необходимо, вы можете установить права на выполнение с помощью команды:

```bash
chmod +x copy_files.sh
```

## Заключение

Этот скрипт удобен для быстрого и безопасного копирования большого количества файлов, обеспечивая при этом защиту от потери данных в случае конфликтов имен.
